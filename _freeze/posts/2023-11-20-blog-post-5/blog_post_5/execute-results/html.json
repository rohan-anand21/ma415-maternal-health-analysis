{
  "hash": "d28b43d1a777fcb5ec26a75ab2c1e617",
  "result": {
    "markdown": "---\ntitle: \"Blog Post 5\"\nsubtitle: \"Dataset Extension\"\nauthor: \"Aiganysh Ulanova, Jin Kyu Cho, Rohan Anand, Seokhoon Shin, Tianyu Wu\"\ndate: \"2023-11-20\"\ndate-modified: \"2023-11-20\"\ndraft: FALSE\n---\n\nThe datasets that we look to combine are natality data sets from previous years from the same source. We will be using natality data spanning from 2004 to 2021 (17 individual data sets—one for each year) in order to identify historical trends in the data. Due to the large nature of our data set, we will not be combining the data sets directly. Instead, we will apply the same cleaning script to each dataset, which works since they have the same columns, and concatenate the necessary subset of each data set for our specific models. For example, a regression model on a subset of variables does not require a singular dataset, but rather we can pull the necessary columns from each year and combine them into a single smaller dataset. This will make it much more efficient to conduct our analyses as we will be able to have a larger variation of smaller subsets of data that will be more accessible to use across our team members. \n\nBy using data sets from different years, this will allow us to look at trends over time in-depth. We are curious to find out if some features of maternal statistics have decreased, increased, or stayed the same as the years went by and the conditions around maternal health have changed. Some key statistics we would like to look into is wether the BMI of mothers and its correlation to their baby's health scores (APGAR scores) has changed as the obesity epidemic in the U.S. has increased over the past 2 decades. Another interesting feature we would like to look into is to see if the age at which women are getting pregnant has changed. There has been a shift in culture over the past two decades surrounding women getting pregnant at a later age than women from the generation prior. We can examine if the data shows a statistically significant difference. \n\nSince we are using the same source of new dataset as the previous one, the data format or data type, like inconsistent numeric, character type, or recode, won’t happen in our dataset. For difficulties we are facing in combining the data the length of rows we are looking at might be different. In that case, we need to make the dataset the same length in order to plot. Also, we need to deal with the missing values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse) \n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'dplyr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'stringr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(RColorBrewer) \ndata <- read_csv(here::here('dataset-ignore','natality_data_cleaned_2021.csv')) \n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 4946 Columns: 174\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (54): mar_p, wic, rf_pdiab, rf_gdiab, rf_phype, rf_ghype, rf_ehype, rf_...\ndbl (118): dob_yy, dob_mm, dob_tt, dob_wk, bfacil, mager, mbstate_rec, resta...\nlgl   (2): imp_plur, lmpused\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\nselected_columns <- data[, c(\"bmi_r\", \"apgar5\")] # defining BMI categories \nBMI_categories <- c(\"Underweight\", \"Normal\", \"Overweight\", \"Obesity I\", \"Obesity II\", \"Extreme Obesity III\", \"Unknown or not stated\") # converting numerical BMI values into BMI categories in selected_columns data frame \n\nselected_columns$bmi_r <- factor(selected_columns$bmi_r, levels = c(1, 2, 3, 4, 5, 6, 9), labels = BMI_categories, exclude = c(7, 8)) \nbmi_and_apgar5 <- selected_columns[selected_columns$apgar5 != 99,] \nbmi_and_apgar5 <- bmi_and_apgar5[bmi_and_apgar5$bmi_r != \"Unknown or not stated\", ] \nbmi_and_apgar5$bmi_r <- as.factor(bmi_and_apgar5$bmi_r) \naverage_apgar <- aggregate(apgar5 ~ bmi_r, data = bmi_and_apgar5, mean) \nggplot(bmi_and_apgar5, aes(x = bmi_r, y = apgar5, fill = bmi_r)) + geom_bar(stat = \"summary\", fun = \"mean\") +   geom_text(data = average_apgar, aes(x = bmi_r, y = apgar5, label = sprintf(\"%.2f\", apgar5)), vjust = -0.5, size = 3, color = \"black\") +   labs(title = \"Average APGAR Score for Each Maternal BMI Category\", x = \"BMI Category\", y = \"Average APGAR Score\") + scale_fill_brewer(palette = \"Set3\") +  ylim(0, 10) +   theme(legend.position = \"bottom\", plot.title = element_text(hjust = 0.5)) +   guides(fill = guide_legend(title = NULL)) \n```\n\n::: {.cell-output-display}\n![](blog_post_5_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse) \nlibrary(RColorBrewer) \n\ndata <- read_csv(here::here('dataset-ignore','natality_data_cleaned_2021.csv')) \n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 4946 Columns: 174\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (54): mar_p, wic, rf_pdiab, rf_gdiab, rf_phype, rf_ghype, rf_ehype, rf_...\ndbl (118): dob_yy, dob_mm, dob_tt, dob_wk, bfacil, mager, mbstate_rec, resta...\nlgl   (2): imp_plur, lmpused\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\nselected_columns <- data[, c(\"bmi_r\", \"apgar5\")] # defining BMI categories \nBMI_categories <- c(\"Underweight\", \"Normal\", \"Overweight\", \"Obesity I\", \"Obesity II\", \"Extreme Obesity III\", \"Unknown or not stated\") # converting numerical BMI values into BMI categories in selected_columns data frame \n\nselected_columns$bmi_r <- factor(selected_columns$bmi_r, levels = c(1, 2, 3, 4, 5, 6, 9), labels = BMI_categories, exclude = c(7, 8)) \nbmi_and_apgar5 <- selected_columns[selected_columns$apgar5 != 99,] \nbmi_and_apgar5 <- bmi_and_apgar5[bmi_and_apgar5$bmi_r != \"Unknown or not stated\", ] \nbmi_and_apgar5$bmi_r <- as.factor(bmi_and_apgar5$bmi_r) \naverage_apgar <- aggregate(apgar5 ~ bmi_r, data = bmi_and_apgar5, mean) \nggplot(bmi_and_apgar5, aes(x = bmi_r, y = apgar5, fill = bmi_r)) + geom_bar(stat = \"summary\", fun = \"mean\") +   geom_text(data = average_apgar, aes(x = bmi_r, y = apgar5, label = sprintf(\"%.2f\", apgar5)), vjust = -0.5, size = 3, color = \"black\") +   labs(title = \"Average APGAR Score for Each Maternal BMI Category\", x = \"BMI Category\", y = \"Average APGAR Score\") + scale_fill_brewer(palette = \"Set3\") +  ylim(0, 10) +   theme(legend.position = \"bottom\", plot.title = element_text(hjust = 0.5)) +   guides(fill = guide_legend(title = NULL))\n```\n\n::: {.cell-output-display}\n![](blog_post_5_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\nBased on the plots above, our initial findings indicate that there is little change between the correlation between BMI and average APGAR score. \n",
    "supporting": [
      "blog_post_5_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}